!function(t){function i(t,i,n,e){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"rect",value:{width:n,height:e,style:"'stroke:rgb(0,0,0)'"}},this.setStyle=function(t){this.layer[this.main_uniq].value.style=d.data_svg_method(t)}}function n(t,i,n,e,s){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"circle",value:{cx:n,cy:e,r:s,stroke:"","stroke-width":"",fill:""}},this.setStroke=function(t){this.layer[this.main_uniq].value.stroke=t},this.setStrokeWidth=function(t){this.layer[this.main_uniq].value["stroke-width"]=t},this.setFill=function(t){this.layer[this.main_uniq].value.fill="'"+t+"'"}}function e(t,i,n,e,s,a){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"ellipse",value:{cx:n,cy:e,rx:s,ry:a,style:"'stroke:rgb(0,0,0)'"}},this.setStyle=function(t){this.layer[this.main_uniq].value.style=d.data_svg_method(t)}}function s(t,i,n,e,s,a){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"line",value:{x1:n,y1:e,x2:s,y2:a,style:"'stroke:rgb(0,0,0)'"}},this.setStyle=function(t){this.layer[this.main_uniq].value.style=d.data_svg_method(t)}}function a(t,i,n){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"polygon",value:{points:"'"+n+"'",style:"'stroke:rgb(0,0,0)'"}},this.setStyle=function(t){this.layer[this.main_uniq].value.style=d.data_svg_method(t)}}function o(t,i,n){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"polyline",value:{points:"'"+n+"'",style:"'fill:none;stroke:rgb(0,0,0)'"}},this.setStyle=function(t){this.layer[this.main_uniq].value.style=d.data_svg_method(t)}}function r(t,i){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"fill_rect",value:{}}}function u(t,i,n,e,s){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"text",value:{text:n,x:e,y:s,style:"'fill:black;'",tspan:[]}};this.setTransform=function(t){this.layer[this.main_uniq].value.transform=t},this.setSpanText=function(t,i,n){var e={text:t,x:i,y:n};this.layer[this.main_uniq].value.tspan.push(e)},this.setStyle=function(t){this.layer[this.main_uniq].value.fill=d.data_svg_method(t)}}function c(t,c,l){this.setting=t,this.get_uniq=c;this.init=function(t){},this.clearSvg=function(){},this.removeLayer=function(t){},this.addLayerRectangle=function(t,n){return new i(this.setting,l.layer,t,n)},this.addLayerCircle=function(t,i,e){return new n(this.setting,l.layer,t,i,e)},this.addLayerEllipse=function(t,i,n,s){return new e(this.setting,l.layer,t,i,n,s)},this.addLayerLine=function(t,i,n,e){return new s(this.setting,l.layer,t,i,n,e)},this.addLayerPolyline=function(t){var i="array"==_ps.getTypeof(t)?t.join(","):t;return new o(this.setting,l.layer,i)},this.addLayerPolygon=function(t){var i="array"==_ps.getTypeof(t)?t.join(","):t;return new a(this.setting,l.layer,i)},this.addLayerPath=function(t){return new r(this.setting,l.layer,t)},this.addLayerText=function(t,i,n){return new u(this.setting,l.layer,"'"+t+"'",i,n)},this.updateMove=function(t,i,n){},this.addLayerInCoords=function(t,i){d.addActionBaseArgument(l.action,l.layer,l.inc_action,{coordX:t,coordY:i,index:l.inc_action}),this.posX=t,this.posY=i,this.setting.generate(),l.inc_action++},this.changeLayerInCoords=function(t,i){d.changeActionBaseArgument(l.action,l.layer,{coordX:t-this.posX,coordY:i-this.posY});this.setting.updateCoords(this.get_uniq,t,i)}}function l(t,i,n){var e=t;this.setting={},this.active=!0,this.canva_ps=e.main_svg,this.canva_dom=e.main_svg.element[0],this.default_value=n,this.default_init_class=[],this.setting=function(t){"json"==_ps.getTypeof(t)&&(this.setting=t);var i=_ps.varExtend({width:"300",height:"150"},this.setting);this.resizesvg(i.width,i.height)},this.resizesvg=function(t,i){this.canva_dom.width=t,this.canva_dom.height=i,this.canva_dom.style.width=t,this.canva_dom.style.height=i},this.is_active=function(t){this.active=t}}var _=t,h=_[Math.random().toString(36).replace(/[^a-z]+/g,"")]={};h.svg_reference_value={};var d={get_svg_details:function(t){var i=ps("dom",t).eq(0),n=i.getTagName().toLowerCase(),e=_ps.getUniq();console.log(n),"svg"==n?i.attr({ref_draw_id:e}):i.html("<svg ref_draw_id = "+e+"></svg>");var s=ps("dom","*[ref_draw_id = "+e+"]");return s.attr({xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}),{uniq_id:e,main_svg:s}},coordsExtends:function(t,i){var n={};for(var e in t)n[e]=_ps.has(t,e)?t[e]:0;return d.coordsFunctionValue(n)},coordsFunctionValue:function(t){var i=_ps.getKey(t).join("|"),n=["points","stroke","stroke-width","fill","style","transform"];for(var e in t)if(0==new RegExp("("+n.join("|")+")","g").test(e)&&("function"==_ps.getTypeof(t[e])&&(t[e]=t[e]()),"string"==_ps.getTypeof(t[e]))){var s=new RegExp("("+i+")","g"),a=t[e].replace(s,"glb.$1"),o=new Function("glb","return "+a);t[e]=o(t)}return t},data_svg_method:function(t){return"'"+_ps.delimiter(t,":",";")+"'"},addActionBaseArgument:function(t,i,n,e){var s=[];_ps.each(i,function(t,i){var n=d.coordsExtends(i.value,e);s.push({action:i.action,value:n,inc_layer:t})}),t.push({coords:e,inc_action:n,sub_action:s})},changeActionBaseArgument:function(t,i,n){for(var e=0;e<t.length;e++){var s=t[e],a=(i[s.inc_layer],{});a.coordX=parseInt(s.coords.coordX)+parseInt(n.coordX),a.coordY=parseInt(s.coords.coordY)+parseInt(n.coordY),t[e]={coords:a,inc_action:s.inc_action,sub_action:s.sub_action}}}};l.prototype.svgTemplate=function(){return{rect:function(t){return"<rect "+_ps.delimiter(t,"="," ")+"  />"},circle:function(t){return"<circle "+_ps.delimiter(t,"="," ")+"/>"},ellipse:function(t){return"<ellipse "+_ps.delimiter(t,"="," ")+"/>"},line:function(t){return"<line "+_ps.delimiter(t,"="," ")+"/>"},polyline:function(t){return"<polyline "+_ps.delimiter(t,"="," ")+"/>"},polygon:function(t){return"<polygon "+_ps.delimiter(t,"="," ")+"/>"},path:function(t){return"<path "+_ps.delimiter(t,"="," ")+"/>"},text:function(t){var i={x:t.x,y:t.y,style:t.style},n="";for(var e in t.tspan){var s=t.tspan[e];n+='<tspan x="'+s.x+'" y="'+s.y+'">'+s.text+"</tspan>"}return"<text "+_ps.delimiter(i,"="," ")+">"+t.text+n+"</text>"}}},l.prototype.svgAction=function(t,i){var n=this.svgTemplate(),e="";for(var s in t.action){var a=t.action[s],o="";for(var r in a.sub_action){var u=a.sub_action[r];_ps.has(n,u.action)&&(o+=n[u.action](u.value))}e+="<svg layer_inq = '"+i+"' x = '"+a.coords.coordX+"' y = '"+a.coords.coordY+"' ind = '"+s+"'>"+o+"</svg>"}this.canva_ps.append(e)},l.prototype.svgActionUpdate=function(t,i){this.svgTemplate();for(var n in t.action)ps("svg[layer_inq = "+i+" ]").attr({x:val_ref.coords.coordX,y:val_ref.coords.coordY})},l.prototype.AddInitClass=function(t,i){this.default_init_class.push({clas_s:t,get_uniq:i})},l.prototype.AddValue=function(t,i){},l.prototype.generate=function(){for(var t in this.default_init_class){var i=this.default_init_class[t];this.svgAction(this.default_value[i.get_uniq],i.get_uniq)}},l.prototype.updateCoords=function(t,i,n){var e=[];ps("dom","svg[layer_inq = "+t+" ]").each(function(t,s){var a=ps("dom",t).attr(["ind","x","y"]);-1==_ps.indexOf(e,a.ind)&&ps("dom",t).attr({x:parseInt(i)+parseInt(a.x),y:parseInt(a.y)+parseInt(n)}),e.push(a.ind)})},drawkit_svg=function(t,i){if(0==_ps.has(t))return!1;this.main_uniq=_ps.getUniq(),h.svg_reference_value[this.main_uniq]={};var n=d.get_svg_details(t);this.cls_main=new l(n,this.main_uniq,h.svg_reference_value[this.main_uniq]),this.cls_main.setting(i)},drawkit_svg.prototype.setting=function(t){this.cls_main.setting(t)},drawkit_svg.prototype.is_active=function(t){this.cls_main.is_active(t)},drawkit_svg.prototype.layerNew=function(t){var i=_ps.getUniq();h.svg_reference_value[this.main_uniq][i]={},h.svg_reference_value[this.main_uniq][i].action=[],h.svg_reference_value[this.main_uniq][i].layer={},h.svg_reference_value[this.main_uniq][i].inc_action=0,json_val=h.svg_reference_value[this.main_uniq][i];var n=new c(this.cls_main,i,json_val);return this.cls_main.AddInitClass(n,i),n.init(t),n},drawkit_svg.prototype.onMouseMove=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mousemove,touchmove",function(i){t.call(this,i)})},drawkit_svg.prototype.onMouseUp=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mouseup,touchend",function(i){t.call(this,i)})},drawkit_svg.prototype.onMouseDown=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mousedown,touchstart",function(i){t.call(this,i)})},drawkit_svg.prototype.onMouseDrag=function(){if(0==_ps.has(func))return!1;var t=!1;this.cls_main.canva_ps.mousedown(function(i){t=!0}),this.cls_main.canva_ps.mouseup(function(i){t=!1}),this.cls_main.canva_ps.mousemove(function(i){t&&func.call(this,i)})},bootloader=function(){return _.drawkit_svg=drawkit_svg,_.drawkit_svg.module={},_.drawkit_svg.version="1.0.0.0",{init_loader_module:function(){for(var t in _.drawkit_svg.module)0==_ps.has(drawkit_svg.prototype,t)&&(drawkit_svg.prototype[t]=_.drawkit_svg.module[t])}}};var v=bootloader();ps("ready",function(){v.init_loader_module()})}(window);