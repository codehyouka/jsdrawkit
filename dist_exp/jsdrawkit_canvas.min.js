!function(t){function i(t,i,n,a,e,s){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"fill_rect",value:{pathX:n,pathY:a,width:e,height:s}}}function n(t,i,n,a,e,s){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"clear_rect",value:{pathX:n,pathY:a,width:e,height:s}}}function a(t,i,n,a,e,s){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"stroke_rect",value:{pathX:n,pathY:a,width:e,height:s}}}function e(t,i,n,a){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"move_to_line",value:{pathX:n,pathY:a}}}function s(t,i,n,a){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"line_to_line",value:{pathX:n,pathY:a}}}function o(t,i,n,a){this.main_uniq=_ps.getUniq(),this.layer=i;var e=_ps.varExtend({color:"#000000"},a);this.layer[this.main_uniq]={action:"is_fill_line",value:{bool:n,setting:e}}}function c(t,i,n,a,e,s,o,c){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"circle_to_arc",value:{pathX:n,pathY:a,radius:e,sAngle:s,eAngle:o,clockwise:c}}}function r(t,i,n,a,e){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"is_stroke_line",value:{bool:n,linewidth:a,linecolor:e}}}function h(t,i,n,a){this.main_uniq=_ps.getUniq(),this.layer=i,this.layer[this.main_uniq]={action:"img_to_img",value:{img:img,pathX:n,pathY:a}}}function l(t,i,n,a,e,s){this.main_uniq=_ps.getUniq(),this.layer=i;var o=_ps.varExtend({"font-family":"12px Arial",color:"#000000"},s);this.layer[this.main_uniq]={action:"text_to_fill",value:{text:n,pathX:a,pathY:e,setting:o}}}function _(t,i,n,a,e,t){this.main_uniq=_ps.getUniq(),this.layer=i;var s=_ps.varExtend({"font-family":"12px Arial",color:"#000000"},t);this.layer[this.main_uniq]={action:"text_to_stroke",value:{text:n,pathX:a,pathY:e,setting:s}}}function u(t,u,v){this.setting=t;this.posX=0,this.posY=0,this.init=function(t){},this.clearCanvas=function(){},this.addLayerFillRect=function(t,n,a,e){return new i(this.setting,v.layer,t,n,a,e)},this.addLayerClearRect=function(t,i,a,e){return new n(this.setting,v.layer,t,i,a,e)},this.addLayerStrokeRect=function(t,i,n,e){return new a(this.setting,v.layer,t,i,n,e)},this.addLayerMoveTo=function(t,i){return new e(this.setting,v.layer,t,i)},this.addLayerLineTo=function(t,i){return new s(this.setting,v.layer,t,i)},this.addLayerIsFill=function(t,i){return new o(this.setting,v.layer,t,i)},this.addLayerArc=function(t,i,n,a,e,s){return new c(this.setting,v.layer,t,i,n,a,e,s)},this.addLayerIsStroke=function(t,i,n){return new r(this.setting,v.layer,t,i,n)},this.addLayerImage=function(t,i,n){return new h(this.setting,v.layer,i,n)},this.addLayerFillText=function(t,i,n,a){return new l(this.setting,v.layer,t,i,n,a)},this.addLayerStrokeText=function(t,i,n,a){return new _(this.setting,v.layer,t,i,n,a)},this.removeLayer=function(t){},this.updateRect=function(t,i,n){},this.addLayerInCoords=function(t,i){f.addActionBaseArgument(v.action,v.layer,v.inc_action,{coordX:t,coordY:i,index:v.inc_action}),this.posX=t,this.posY=i,this.setting.generate(),v.inc_action++},this.changeLayerInCoords=function(t,i){f.changeActionBaseArgument(v.action,v.layer,{coordX:t-this.posX,coordY:i-this.posY});this.posX=t,this.posY=i,this.setting.generate()}}function v(i,n,a){var e=i;this.setting={},this.active=!0,this.canva_ps=e.main_canvas,this.canva_dom=e.main_canvas.element[0],this.canva=this.canva_dom.getContext("2d"),this.default_value=a,this.default_init_class=[],this.setting=function(t){"json"==_ps.getTypeof(t)&&(this.setting=t);var i=_ps.varExtend({width:"300",height:"150",is_pixel:!0},this.setting);this.resizeCanvas(i.width,i.height)},this.resizeCanvas=function(t,i){this.canva_dom.width=t,this.canva_dom.height=i,this.canva_dom.style.width=t,this.canva_dom.style.height=i,this.pixelRatio()},this.getCanvasHeight=function(){return this.canva_dom.height},this.getCanvasWidth=function(){return this.canva_dom.width},this.is_active=function(t){this.active=t},this.pixelRatio=function(){if(this.setting.is_pixel){var i=t.devicePixelRatio||1,n=this.canva.webkitBackingStorePixelRatio||this.canva.mozBackingStorePixelRatio||this.canva.msBackingStorePixelRatio||this.canva.oBackingStorePixelRatio||this.canva.backingStorePixelRatio||1,a=i/n;if(i!==n){var e=this.canva_dom.width,s=this.canva_dom.height;this.canva_dom.width=e*a,this.canva_dom.height=s*a,this.canva_dom.style.width=e,this.canva_dom.style.height=s,this.canva.scale(a,a)}}}}var d=t,p=d[Math.random().toString(36).replace(/[^a-z]+/g,"")]={};p.canvas_reference_value={};var f={get_canvas_details:function(t){var i=ps("dom",t).eq(0),n=i.getTagName().toLowerCase(),a=_ps.getUniq();return console.log(n),"canvas"==n?i.attr({ref_draw_id:a}):i.html("<canvas ref_draw_id = "+a+"></canvas>"),{uniq_id:a,main_canvas:ps("dom","*[ref_draw_id = "+a+"]")}},coordsExtends:function(t,i){var n={};for(var a in t)n[a]=_ps.has(t,a)?t[a]:0;for(var a in i)n[a]=_ps.has(i,a)?i[a]:0;return f.coordsFunctionValue(n)},coordsFunctionValue:function(t){var i=_ps.getKey(t).join("|");for(var n in t)if("function"==_ps.getTypeof(t[n])&&(t[n]=t[n]()),"string"==_ps.getTypeof(t[n])&&/[\{\}]{1}/g.test(t[n])){var a=t[n].replace(/[\{\}]{1}/g,""),e=new RegExp("("+i+")","g"),s=a.replace(e,"glb.$1"),o=new Function("glb","return "+s);t[n]=o(t)}return t},addActionBaseArgument:function(t,i,n,a){_ps.each(i,function(i,e){var s=f.coordsExtends(e.value,a);t.push({action:e.action,value:s,inc_action:n,inc_layer:i,uniq_key:i})})},changeActionBaseArgument:function(t,i,n){for(var a=0;a<t.length;a++){var e=t[a],s=i[e.uniq_key],o={};o.coordX=parseInt(e.value.coordX)+parseInt(n.coordX),o.coordY=parseInt(e.value.coordY)+parseInt(n.coordY);var c=f.coordsExtends(s.value,o);t[a]={action:e.action,value:c,inc_action:e.inc_action,inc_layer:e.inc_layer,uniq_key:e.uniq_key}}}};v.prototype.canvasAction=function(t){var i=this.canva,n={fill_rect:function(t){i.fillRect(t.pathX,t.pathY,t.width,t.height)},clear_rect:function(t){i.clearRect(t.pathX,t.pathY,t.width,t.height)},stroke_rect:function(t){i.strokeRect(t.pathX,t.pathY,t.width,t.height)},move_to_line:function(t){i.moveTo(t.pathX,t.pathY)},line_to_line:function(t){i.lineTo(t.pathX,t.pathY)},circle_to_arc:function(t){i.arc(t.pathX,t.pathY,t.radius,t.sAngle,t.eAngle,t.clockwise)},is_fill_line:function(t){var n=!0;"boolean"==_ps.getTypeof(t.bool)&&(n=t.bool),i.fillStyle=t.setting.color,n&&i.fill()},is_stroke_line:function(t){i.lineWidth=parseInt(t.linewidth),"0"!=t.linecolor.toString()&&(i.strokeStyle=t.linecolor);var n=!0;"boolean"==_ps.getTypeof(t.bool)&&(n=t.bool),n&&i.stroke()},img_to_img:function(t){i.drawImage(t.img,t.pathX,t.pathY)},text_to_stroke:function(t){i.font=t.setting["font-family"],i.strokeStyle=t.setting.color,i.strokeText(t.text,t.pathX,t.pathY)},text_to_fill:function(t){i.font=t.setting["font-family"],i.fillStyle=t.setting.color,i.fillText(t.text,t.pathX,t.pathY)}};i.beginPath(),_ps.each(t.action,function(t,i){var a=i;n[a.action](a.value)}),i.save()},v.prototype.AddInitClass=function(t,i){this.default_init_class.push({clas_s:t,get_uniq:i})},v.prototype.AddValue=function(t,i){},v.prototype.generate=function(){this.canva.clearRect(0,0,this.canva_dom.width,this.canva_dom.height);for(var t in this.default_init_class){var i=this.default_init_class[t];this.canvasAction(this.default_value[i.get_uniq])}},drawkit_cnv=function(t,i){if(0==_ps.has(t))return!1;this.main_uniq=_ps.getUniq(),p.canvas_reference_value[this.main_uniq]={};var n=f.get_canvas_details(t);this.cls_main=new v(n,this.main_uniq,p.canvas_reference_value[this.main_uniq]),this.cls_main.setting(i)},drawkit_cnv.prototype.setting=function(t){this.cls_main.setting(t)},drawkit_cnv.prototype.is_active=function(t){this.cls_main.is_active(t)},drawkit_cnv.prototype.getCanvasHeight=function(){this.cls_main.getCanvasHeight()},drawkit_cnv.prototype.getCanvasWidth=function(){this.cls_main.getCanvasWidth()},drawkit_cnv.prototype.layerNew=function(t){var i=_ps.getUniq();p.canvas_reference_value[this.main_uniq][i]={},p.canvas_reference_value[this.main_uniq][i].action=[],p.canvas_reference_value[this.main_uniq][i].inc_action=0,p.canvas_reference_value[this.main_uniq][i].layer={},json_val=p.canvas_reference_value[this.main_uniq][i];var n=new u(this.cls_main,i,json_val);return this.cls_main.AddInitClass(n,i),n.init(t),n},drawkit_cnv.prototype.onMouseMove=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mousemove,touchmove",function(i){t.call(this,i)})},drawkit_cnv.prototype.onMouseUp=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mouseup,touchend",function(i){t.call(this,i)})},drawkit_cnv.prototype.onMouseDown=function(t){if(0==_ps.has(t))return!1;this.cls_main.canva_ps.on("mousedown,touchstart",function(i){t.call(this,i)})},drawkit_cnv.prototype.onMouseDrag=function(){if(0==_ps.has(func))return!1;var t=!1;this.cls_main.canva_ps.mousedown(function(i){t=!0}),this.cls_main.canva_ps.mouseup(function(i){t=!1}),this.cls_main.canva_ps.mousemove(function(i){t&&func.call(this,i)})},bootloader=function(){return d.drawkit_canvas=drawkit_cnv,d.drawkit_canvas.module={},d.drawkit_canvas.version="1.0.0.0",{init_loader_module:function(){for(var t in d.drawkit_canvas.module)0==_ps.has(drawkit_cnv.prototype,t)&&(drawkit_cnv.prototype[t]=d.drawkit_canvas.module[t])}}};var g=bootloader();ps("ready",function(){g.init_loader_module()})}(window);